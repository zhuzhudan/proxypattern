# 代理模式

为其他对象提供一种代理，以控制这个对象的访问  
代理对象在客服端和目标对象之前起到中介作用

**适用场景**  
保护目标对象，增强目标对象

**优点**  
代理模式能将代理对象与真是被调用的目标对象分离，一定程度上降低了系统的耦合程度，易于扩展  
代理可以起到保护目标对象的作用  
增强目标对象的职责  

**缺点**  
代理模式会造成系统设计中类的数目增加  
在客户端和目标对象之间增加了一个代理对象，会造成请求处理速度变慢  
增加了系统复杂度  

## 静态代理  
显示声明被代理对象  
不符合开闭原则  

## 动态代理  
动态配置和替换被代理对象；生成一个新的类，去实现增强代码逻辑的功能  

### JDK动态代理  
必须实现接口，根据接口方法进行扫描，动态生成接口内的方法，实现覆盖  

### CGLib动态代理  
扫描父类的方法，子类重写  
无法代理final修饰的方法  

**CGLib与JDK动态代理对比**  
1、JDK动态代理是实现了被代理对象的接口，CGLib是继承了被代理对象  
2、JDK和CGLib都是在运行期生成字节码，JDK是直接写Class字节码，CGLib使用ASM框架写Class字节码，CGLib代理实现更复杂，生成代理类比JDK效率低  
3、JDK调用代理方法，是通过反射机制调用，CGLib是通过FastClass机制直接调用方法，CGLib执行效率更高  
